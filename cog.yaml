# Configuration for Cog ⚙️

build:
  # Set to true if your model requires a GPU
  gpu: true

  # A list of Ubuntu apt packages to install
  system_packages:
    - git
    - build-essential       # Includes gcc, g++, and make
    - cmake                 # Install cmake via pip instead
    - ninja-build           # Ninja build system
    - libssl-dev
    - zlib1g-dev
    - libstdc++6
    - python3-dev           # Python headers
    - wget

  # Python version
  python_version: "3.11"

  # Python packages
  python_packages:
    - wheel==0.38.4
    - numpy>=1.20.0

  # Commands run after the environment is set up
  run:
    - pip install --upgrade pip setuptools wheel
    - pip install cmake==3.27.0  # Install a compatible version of cmake
    - pip install scikit-build==0.18.1 ninja
    # Install llama-cpp-python from GitHub with CUDA support
    - pip install git+https://github.com/abetlen/llama-cpp-python.git@main#egg=llama-cpp-python[cuda]

predict: "predict.py:Predictor"
